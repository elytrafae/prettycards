
<html>

    <head>
        <title>Emote List</title>
        <style>
            #mainTable {
                margin: 10px auto;
                font-size: 24px;
            }

            #mainTable .header {
                font-weight: bold;
                background-color: #BBBBBB;
            }

            .withSong {
                background-color: rgb(14, 205, 14);
            }

            .noSong {
                background-color: #FF4444;
            }
        </style>
    </head>

    <body>
        <table id="mainTable">
            <tr class="header">
                <td>Id</td>
                <td>Name</td>
                <td>Code Name</td>
                <td>Image</td>
                <td>Audio</td>
            </tr>
        </table>

        <script src="js/jquery-3.6.0.min.js"></script>
        <script>
            var emotesWithSounds = [];
            var allEmotes = [];

            function fillTable() {
                if (emotesWithSounds.length == 0 && allEmotes.length == 0) {
                    return;
                }
                var $table = $("#mainTable");
                allEmotes.forEach(function(emote) {
                    var isPresent = emotesWithSounds.includes(emote.image);
                    $table.append(`
                        <tr class="${isPresent ? "withSong" : "noSong"}">
                            <td>${emote.id}</td>
                            <td>${emote.name}</td>
                            <td>${emote.image}</td>
                            <td><a href="https://undercards.net/images/emotes/${emote.image}.png" target="_blank">CLICK HERE</a></td>
                            <td>${isPresent ? '<audio controls src="https://raw.githubusercontent.com/CMD-God/prettycards/master/audio/emotes/' + emote.image + '.ogg"></audio>' : "NONE"}</td>
                        </tr>
                    `);
                })
            }

            $.getJSON("https://api.github.com/repos/cmd-god/prettycards/contents/audio/emotes", {}, function(data) {
                data.forEach(function(d) {
                    emotesWithSounds.push(d.name.substring(0, d.name.length-4));
                })
                fillTable();
            })
            $.getJSON("every_undercards_emote.json", {}, function(data) {
                allEmotes = data;
                fillTable();
            })
        </script>
    </body>

</html>